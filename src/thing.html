<form id="[% self.name as URL %]-choose" action="/choose-thing" method="post"
              target="hidden-form"
              onsubmit="setTimeout(function () { window.location.reload(); }, 500)">
  <input type="hidden" name="name" value="[% self.name %]">
  <input type="hidden" name="list" value="[% self.parent_name %]">
  <input type="hidden" name="code" value="[% self.parent_code %]">
</form>
<form action="/delay-thing" method="post"
              target="hidden-form"
              onsubmit="setTimeout(function () { window.location.reload(); }, 500)">
  <input type="submit" value="delay">
  <input type="hidden" name="name" value="[% self.name %]">
  <input type="hidden" name="list" value="[% self.parent_name %]">
  <input type="hidden" name="code" value="[% self.parent_code %]">
</form>
<a onclick="toggleView('[% self.name as URL %]');toggleView('[% self.name as URL %]-view')"><i class="material-icons">edit</i></a>
[% if let Some(ref link) = self.link {
  %]<a class="choose" id="[% self.name as URL %]-view"
       onclick="document.getElementById('[% self.name as URL
                %]-choose').submit();" href="[% link as URL %]">[% self.name %]</a>[%
} else {
  %]<span class="choose" id="[% self.name as URL %]-view" onclick="document.getElementById('[% self.name as URL
                %]-choose').submit(); setTimeout(function () { window.location.reload(); }, 500);">[% self.name %]</span>[%
} %]
<span id="[% self.name as URL %]" class="hide">
  <form action="/edit-thing" method="post"
        target="hidden-form"
        onsubmit="setTimeout(function () { window.location.reload(); }, 500)">
    <input type="text" name="newname" value="[% self.name %]">
    <label for="link"><i class="material-icons">link</i></label>
    <input type="text" name="link" value="[%
       if let Some(ref link) = self.link {
         link
       } %]">
    <input type="hidden" name="name" value="[% self.name %]">
    <input type="hidden" name="list" value="[% self.parent_name %]">
    <input type="hidden" name="code" value="[% self.parent_code %]">
    <input type="submit" style="display: none" />
  </form>
</span>
